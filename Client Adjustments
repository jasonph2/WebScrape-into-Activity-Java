#The whole client is not listed in this file, simply the function that I addded to it

import com.android.volley.Request;
import com.android.volley.RequestQueue;
import java.net.URL;
import java.util.function.Consumer;
import java.net.HttpURLConnection;
import com.fasterxml.jackson.databind.ObjectMapper;
import edu.illinois.cs.cs124.ay2022.mp.models.ResultMightThrow;
import edu.illinois.cs.cs124.ay2022.mp.application.FavoritePlacesApplication;
import com.fasterxml.jackson.core.JsonProcessingException;

public void getTopRecommendations(final Consumer<ResultMightThrow<List<List<String>>>> callback) {
  StringRequest getTopRecommendationsRequest = new StringRequest(
      Request.Method.GET, FavoritePlacesApplication.SERVER_URL + "/topRecommendations/",
      response -> {
        try {
          List<List<String>> topRecommendations = OBJECT_MAPPER.readValue(response, new TypeReference<>() {});
          callback.accept(new ResultMightThrow<>(topRecommendations));
        } catch (JsonProcessingException error) {
          callback.accept(new ResultMightThrow<>(error));
        }
      },
      error -> {
        callback.accept(new ResultMightThrow<>(error));
      }
  );
  requestQueue.add(getTopRecommendationsRequest);
}
